(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(14),s=n.n(a),i=(n(26),n(27),n(10)),u=n(9),l=n(21),o=n(7),d=n(19),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(d.a)(e);return e.forEach((function(e,c){e.currency in t&&(n[c].rate=t[e.currency])})),n},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(d.a)(e);return t.forEach((function(e){var t=n.findIndex((function(t){return t.currency===e.currency}));n[t].amount=e.amount})),n},x=[{currency:"USD",symbol:"$",amount:200,rate:1},{currency:"EUR",symbol:"\u20ac",amount:150,rate:1},{currency:"GBP",symbol:"\xa3",amount:10,rate:1}],f={loading:!1,error:!1,message:""},O=Object(i.b)({wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_EXCHANGE_RATES":return j(e,t.data);case"EXCHANGE_WALLET_CURRENCIES":return b(e,t.data);default:return e}},saga:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_EXCHANGE_RATES":return Object(o.a)(Object(o.a)({},e),{},{loading:!0,error:!1,message:""});case"REQUEST_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:!1,message:""});case"REQUEST_FAILED":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:!0,message:t.message});default:return e}}}),h=n(11),v=n.n(h),m=n(8),g=v.a.mark(E),p=v.a.mark(S),y=v.a.mark(N);function E(e){var t,n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.b)((function(){return fetch("https://freecurrencyapi.net/api/v2/latest?apikey=".concat("733bf330-4329-11ec-a3bc-09a4ace82edf"))}));case 3:if(!(t=e.sent).ok){e.next=16;break}return e.next=7,Object(m.b)([t,"json"]);case 7:return n=e.sent,(c=Object(o.a)({},n.data)).USD=1,e.next=12,Object(m.c)({type:"NEW_EXCHANGE_RATES",data:c});case 12:return e.next=14,Object(m.c)({type:"REQUEST_SUCCESS"});case 14:e.next=18;break;case 16:return e.next=18,Object(m.c)({type:"REQUEST_FAILED",message:""===t.statusText?"Failed to get latest exchange rates":t.statusText});case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(0),console.log(e.t0),e.next=25,Object(m.c)({type:"REQUEST_FAILED",message:"API error ocurred ..."});case 25:case"end":return e.stop()}}),g,null,[[0,20]])}function S(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("REQUEST_EXCHANGE_RATES",E);case 2:case"end":return e.stop()}}),p)}function N(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)([S()]);case 2:case"end":return e.stop()}}),y)}var C=n(12),T=n(2),A=function(){return Object(T.jsx)("div",{className:"loading-screen flex-display flex-center",children:Object(T.jsx)("span",{children:"Loading"})})},R=function(){var e=Object(u.c)((function(e){return e.wallet})),t=Object(u.b)(),n=Object(c.useState)(0),r=Object(C.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(0),l=Object(C.a)(i,2),o=l[0],d=l[1],j=Object(c.useState)(1),b=Object(C.a)(j,2),x=b[0],f=b[1],O=Object(c.useState)(0),h=Object(C.a)(O,2),v=h[0],m=h[1],g=Object(c.useState)(1),p=Object(C.a)(g,2),y=p[0],E=p[1];Object(c.useEffect)((function(){E(Math.round(e[x].rate/e[a].rate*1e4)/1e4)}),[e,E,a,x]),Object(c.useEffect)((function(){m(Math.round(o*y*100)/100)}),[y,o,m]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{style:{padding:24},children:Object(T.jsxs)("div",{className:"flex-display",style:{fontSize:"12px"},children:[Object(T.jsxs)("div",{style:{flex:1},children:[Object(T.jsx)("div",{children:Object(T.jsx)("select",{value:a.toString(),onChange:function(e){return t=Number(e.target.value),void s(t);var t},children:e.map((function(e,t){return Object(T.jsx)("option",{disabled:t===x,value:t.toString(),children:e.currency},e.currency)}))})}),Object(T.jsx)("span",{className:"input-prefix",children:"-"}),Object(T.jsx)("input",{type:"number",value:0===o?"":o.toString(),onChange:function(e){return t=""===e.target.value?0:Number(e.target.value),void d(t);var t},"data-testid":"firstValue"}),Object(T.jsx)("div",{className:"exceeds-balance",children:o>e[a].amount?"Exceeds balance":Object(T.jsx)(T.Fragment,{children:"\xa0"})})]}),Object(T.jsxs)("div",{className:"flex-display flex-center exchange-rate",style:{flex:1},children:[e[a].symbol,"1 = ",e[x].symbol,y]}),Object(T.jsxs)("div",{className:"flex-display",style:{flex:1,flexDirection:"column",alignItems:"flex-end"},children:[Object(T.jsx)("div",{children:Object(T.jsx)("select",{value:x.toString(),onChange:function(e){return t=Number(e.target.value),void f(t);var t},children:e.map((function(e,t){return Object(T.jsx)("option",{disabled:t===a,value:t.toString(),children:e.currency},e.currency)}))})}),Object(T.jsxs)("div",{children:[Object(T.jsx)("span",{className:"input-prefix",children:"+"}),Object(T.jsx)("input",{type:"number",value:0===v?"":v.toString(),onChange:function(e){return t=""===e.target.value?0:Number(e.target.value),void d(Math.round(t/y*100)/100);var t},"data-testid":"secondValue"})]}),Object(T.jsx)("div",{children:"\xa0"})]})]})}),Object(T.jsx)("div",{className:"text-center",children:Object(T.jsx)("div",{className:"text-center",style:{flex:1},children:Object(T.jsx)("button",{className:"exchange-button flex-display flex-center",disabled:0===o||o>e[a].amount,onClick:function(){t({type:"EXCHANGE_WALLET_CURRENCIES",data:[{currency:e[a].currency,amount:e[a].amount-o},{currency:e[x].currency,amount:e[x].amount+v}]}),d(0),m(0)},children:"Exchange"})})})]})},_=function(){var e=Object(u.c)((function(e){return e.wallet}));return Object(T.jsx)("div",{className:"flex-display",style:{paddingTop:12,paddingBottom:16},children:e.map((function(e){return Object(T.jsxs)("div",{style:{flex:1,textAlign:"center"},children:[Object(T.jsx)("div",{className:"currency-symbol",children:e.currency}),Object(T.jsxs)("div",{children:[e.symbol,Math.round(100*e.amount)/100]})]},e.currency)}))})},U=function(){var e=Object(u.b)();return Object(c.useEffect)((function(){e({type:"REQUEST_EXCHANGE_RATES"})}),[e]),Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)("div",{className:"card-header",children:"Wallet Management"}),Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)(R,{}),Object(T.jsx)("div",{style:{padding:24,background:"#eee",borderRadius:"0 0 8px 8px"},children:Object(T.jsx)(_,{})})]})]})},w=function(e){var t=e.message,n=Object(c.useState)(!0),r=Object(C.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){setTimeout((function(){return s(!1)}),2e3)}),[s]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{className:"flex-display flex-center",style:{position:"fixed",zIndex:10,left:0,right:0,top:10},children:Object(T.jsx)("div",{className:"notification",style:{opacity:a?1:0},children:t})})})},k=Object(l.a)(),F=Object(i.d)(O,Object(i.a)(k));function I(){var e=Object(u.c)((function(e){return e.saga})),t=e.loading,n=e.error,c=e.message;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"flex-display flex-center full-size",children:Object(T.jsx)(U,{})}),t?Object(T.jsx)(A,{}):null,n?Object(T.jsx)(w,{message:c}):null]})}k.run(N);var L=function(){return Object(T.jsx)(u.a,{store:F,children:Object(T.jsx)(I,{})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(L,{})}),document.getElementById("root")),G()}},[[36,1,2]]]);
//# sourceMappingURL=main.1bec6b7a.chunk.js.map